<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="grid gap-4" *ngFor="let columna of columnas">
        <div *ngFor="let producto of columna" class="relative group">
            <img class="producto-img" [src]="producto.imagenUrl" [alt]="producto.nombre">

            <button (click)="abrirModal(producto)"
                class="absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-pink-600 text-white px-3 py-1 text-sm rounded shadow hover:bg-pink-700">
                Ver más
            </button>
        </div>
    </div>
</div>

<div *ngIf="modalProducto" class="fixed inset-0 z-50 flex items-center justify-center">
  <div class="absolute inset-0">
    <div class="w-full h-full bg-black bg-opacity-60 backdrop-blur-md"></div>
  </div>
  <div class="relative bg-white rounded-3xl shadow-2xl max-w-md w-full p-6 md:p-8 border border-pink-200 z-10">
    <button (click)="cerrarModal()"
      class="absolute top-3 right-3 text-pink-400 hover:text-pink-700 text-2xl font-bold transition-colors duration-200">&times;</button>

    <img class="w-full h-48 object-cover rounded-xl mb-6 border border-pink-100 shadow-sm" [src]="modalProducto.imagenUrl" [alt]="modalProducto.nombre">

    <h2 class="text-2xl font-bold text-pink-700 mb-2">{{ modalProducto.nombre }}</h2>
    <div class="flex flex-col md:flex-row md:justify-between gap-2 mb-2">
      <span class="text-sm text-gray-500">Marca: <strong class="text-pink-600">{{ modalProducto.marca }}</strong></span>
      <span class="text-sm text-gray-500">Categoría: <strong class="text-pink-600">{{ modalProducto.categoria }}</strong></span>
    </div>
    <div class="text-lg text-pink-600 font-semibold mb-4">Precio unitario: ${{ modalProducto.precio }}</div>
    <div class="my-4 flex flex-col gap-2">
      <label class="text-sm text-gray-700 font-medium mb-1" for="cantidad">Cantidad:</label>
      <input
        id="cantidad"
        type="number"
        min="1"
        [(ngModel)]="cantidadSeleccionada"
        class="border border-pink-300 rounded px-3 py-1 w-24 text-center focus:ring-2 focus:ring-pink-200"
      />
      <div class="text-base text-pink-700 font-semibold mt-2">
        Total: ${{ modalProducto.precio * cantidadSeleccionada || modalProducto.precio }}
      </div>
      <button
        (click)="comprarProducto(modalProducto, cantidadSeleccionada)"
        class="mt-4 bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transition"
      >
        Comprar
      </button>
    </div>
  </div>
</div>